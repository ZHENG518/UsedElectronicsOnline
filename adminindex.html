<!DOCTYPE html>
<html>
<head>
	<title>Used Electronics Online Admin</title>
	<link rel="stylesheet" type="text/css" href="style.css" />
	<script src="https://www.gstatic.com/firebasejs/6.5.0/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/6.5.0/firebase-database.js"></script>
	<style>
    body {font-family: Arial, Helvetica, sans-serif; text-align: center;}
		input{
			height: 30px;
			width: 250px;
		}

		.button{
			margin: 0 auto;
		}

		.container{
			padding: 30px 10px;
			position: absolute;
			background-color: white;

			top:50%;
			left:50%;
			margin-left: -200px;
			margin-top: -100px;
		}
    </style>
</head>
<body>
	<div class="header">
		<table border="0" height="100%" width="100%" style="table-layout:fixed;">
			<tr>
				<td style="padding-left:20px">
					<h1 style="color:white">Used Electronics Online Admin</h1>
				</td>
				<td id="header-right" style="padding-right:70px" align="right">
				</td>
			</tr>
		</table>
		<h1 id="name"></h1>
	</div>

	  <!-- <div class="container">
		<h2>Create a new admin account</h2>
		<table cellspacing="30px">
			<tr>
				<td><label for="uname"><b>ID</b></label></td>
				<td><input id="uname" type="text" placeholder="User ID" name="uname" required></td>
			</tr>
			<tr>
				<td><label for="psw"><b>Password</b></label></td>
				<td><input id="psw" type="text" placeholder="Password" name="psw" required></td>
			</tr>
		</table>
		<div class="button">
			<button onclick="submit()" class="back_button">Create</button>
			<button onclick="location.href='admin.html'" class="back_button">Back</button>
		</div>
  </div> -->

    <script>
		var url = location.search;
		var id = url.substr(1).split("=")[1];
		document.getElementById("name").innerHTML = "Welcome "+id;
  	var firebaseConfig = {
      apiKey: "AIzaSyBa5C0ajfZM6f7eE64L7n6lmk9QP8pHlAo",
      authDomain: "used-electronics-online.firebaseapp.com",
      databaseURL: "https://used-electronics-online.firebaseio.com",
      projectId: "used-electronics-online",
      storageBucket: "used-electronics-online.appspot.com",
      messagingSenderId: "575629351639",
      appId: "1:575629351639:web:d9317118bcf7391e"
    };
    firebase.initializeApp(firebaseConfig);

  	function submit()
  	{
  		var uname = document.getElementById("uname").value;
  		var psw = document.getElementById("psw").value;
  		if(uname == "" || psw == ""){
     		alert("Please fill the form");
      	}else{
      		var ref = firebase.database().ref('administrator/'+uname);
      		ref.once('value').then(function(snapshot){
      			if(snapshot.val() != null){
      				alert("The ID is already exist");
      			}else{
      				ref.set({password: psw});
      				alert("New admin accout created\nID: "+uname+"\nPassword: "+psw);
      			}
      		});
      	}
  	}

  </script>
</body>
</html>
